<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" href="node_modules/uikit/dist/css/uikit.min.css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" href="style.css">
	</head>

	<body>
		<main>
			<input class="tab-radio" id="tab1" type="radio" name="tabs" checked>
			<label class="tab-label" for="tab1">Form Editor</label>
				
			<input class="tab-radio" id="tab2" type="radio" name="tabs">
			<label class="tab-label" for="tab2">Form Actions</label>
				
			<section id="content1">
				<div id="formCreator">Hello World</div>
			</section>
			
			<section id="content2">
				<div id="formInit">Hello World</div>
			</section>
		</main>
		<script src="build/idf.min.js" charset="utf-8"></script>
		<script type="text/javascript">
			// intialize library with selector
			var idfObj = idf('#formCreator');
			// enable form editor mode
			idfObj.init();

			// intialise library with selector
			var previewForm = idf('#formInit');

			// custom click event to derive form editor Form values
			this.idf_submit_btn = document.getElementById('idf_submit_btn');
			this.idf_submit_btn.addEventListener('click', (event) => {	
				var formObj = idfObj.getFormObject();
				
				// store formElemets in localStorage; a simple data storage technique 
				// used momentarily
				localStorage.setItem('formObject', JSON.stringify(formObj));
				
				var formElements = JSON.parse(localStorage.getItem('formObject'));

				// pass form editor Form values to create the final functionaing Form
				previewForm.create(formElements);
				addSubmitEventListener();
			});

			function addSubmitEventListener() {
				this.submit_form = document.getElementById('submit_form');
				this.submit_form.addEventListener('click', (event) => {
					var formElements = JSON.parse(localStorage.getItem('formObject'));
					// Final Form submit event
					previewForm.submit();
				});
			}
		</script>
	</body>
</html>
